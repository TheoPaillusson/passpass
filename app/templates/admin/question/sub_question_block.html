{% for subform, sub in zip(form.sub_questions, question.sub_questions) %}
<div class="card mb-3 p-3 border sub-question-block">
    <div>
        {{ subform.question_statement.label }} 
        {{ subform.question_statement }}
    </div>

    <div>
        {{ subform.question_image.label }} 
        {{ subform.question_image }}

        {% if sub.question_image %}
        <div class="mb-3">
            <label class="form-label">Image actuelle :</label>
            <div class="question-image-wrapper">
                <img src="{{ url_for('static', filename='uploads/questions/' + sub.question_image)}}"
                     alt="Image actuelle de la sous-question"
                     class="img-fluid rounded shadow" >
            </div>
        </div>
        <!-- Hidden input to retain the existing image filename -->
        <input type="hidden" name="sub_questions-{{ loop.index0 }}-existing_image" value="{{ sub.question_image }}">
        {% endif %}
    </div>

    <div>
        {{ subform.option1.label }} {{ subform.option1 }}
    </div>
    <div>
        {{ subform.option2.label }} {{ subform.option2 }}
    </div>
    <div>
        {{ subform.option3.label }} {{ subform.option3 }}
    </div>
    <div>
        {{ subform.option4.label }} {{ subform.option4 }}
    </div>
    <div>
        {{ subform.option5.label }} {{ subform.option5 }}
    </div>
    <div>
        {{ subform.correct_options.label }} {{ subform.correct_options }}
    </div>
    <div>
        {{ subform.correction.label }} {{ subform.correction }}
    </div>

    <button type="button" class="btn btn-danger btn-sm remove-sub-question mt-2">Supprimer cette sous-question</button>
</div>
{% endfor %}
